@using FuncionarioCadastroWeb.ViewModels
@model FuncionarioViewModel

@{
    ViewData["Title"] = "Cadastro de Funcionários";
}

<h1>Cadastro de Funcionários</h1>

<form asp-action="Create" method="post" class="mt-3">
    <div class="mb-3">
        <label asp-for="Id" class="form-label"></label>
        <input asp-for="Id" class="form-control" placeholder="Id (insira apenas se já tiver)" />
    </div>
    
    <!-- Dados do Funcionario -->
    <div class="mb-3">
        <label asp-for="Nome" class="form-label"></label>
        <input asp-for="Nome" class="form-control" placeholder="Nome Completo" />
        <span asp-validation-for="Nome" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="CPF" class="form-label"></label>
        <input asp-for="CPF" id="CPF" class="form-control" placeholder="CPF" oninput="this.value = aplicarMascaraCPF(this.value)" />
        <span asp-validation-for="CPF" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="DataNascimento" class="form-label">Data de Nascimento</label>
        <input asp-for="DataNascimento" type="date" class="form-control"/>
        <span asp-validation-for="DataNascimento" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="UF" class="form-label"></label>
        <select asp-for="UF" asp-items="ViewBag.UFs" class="form-select"></select>
        <span asp-validation-for="UF" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="Profissao" class="form-label">Profissão</label>
        <input asp-for="Profissao" class="form-control" placeholder="Profissão" />
        <span asp-validation-for="Profissao" class="text-danger"></span>
    </div>

    <!-- CNH -->
    <h3>CNH</h3>
    <span asp-validation-for="CNH" class="text-danger"></span>

    <div class="mb-3">
        <label asp-for="CNH.CNH" class="form-label"></label>
        <input asp-for="CNH.CNH" id="CNH" class="form-control" placeholder="CNH" />
        <span asp-validation-for="CNH.CNH" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="CNH.DataEmissao" class="form-label">Data de Emissão</label>
        <input asp-for="CNH.DataEmissao" type="date" class="form-control" />
        <span asp-validation-for="CNH.DataEmissao" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="CNH.Validade" class="form-label"></label>
        <input asp-for="CNH.Validade" type="date" class="form-control" />
        <span asp-validation-for="CNH.Validade" class="text-danger"></span>
    </div>

    <div id="categorias-container" class="mb-3">
        <label class="form-label">Categorias</label>
        <div class="categoria-item d-flex gap-2 mb-2">
            <select name="CNH.Categoria[0]" asp-items="ViewBag.CNHCategorias" class="form-select"></select>
            <span asp-validation-for="CNH.Categoria[0]" class="text-danger"></span>
            <button type="button" class="btn btn-danger" onclick="removeItem(this, 'categorias')">Remover</button>
        </div>
    </div>
    <button type="button" class="btn btn-primary mb-3" onclick="addCategoria()">Adicionar Categoria</button>

    <!-- CTPS -->
    <h3>CTPS</h3>
    <div class="mb-3">
        <label asp-for="CTPS.CTPS" class="form-label"></label>
        <input asp-for="CTPS.CTPS" id="CTPS" class="form-control" placeholder="CTPS"/>
        <span asp-validation-for="CTPS.CTPS" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="CTPS.Tipo" class="form-label">Tipo de Documento</label>
        <select asp-for="CTPS.Tipo" id="CTPS-Tipo" asp-items="ViewBag.CTPSTipo" class="form-select"></select>
        <span asp-validation-for="CTPS.Tipo" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="CTPS.DataEmissao" class="form-label">Data de Emissão</label>
        <input asp-for="CTPS.DataEmissao" type="date" class="form-control"/>
        <span asp-validation-for="CTPS.DataEmissao" class="text-danger"></span>
    </div>

    <!-- Cursos -->
    <h3>Cursos</h3>
    <div id="cursos-container" class="mb-3">
        <div class="curso-item d-flex gap-2 mb-2">
            <div class="mb-2">
                <input name="Curso[0].Curso" placeholder="Nome do curso" class="form-control" />
                <span asp-validation-for="Curso[0].Curso" class="text-danger"></span>
            </div>

            <div class="mb-2">
                <select name="Curso[0].TipoCurso" asp-items="ViewBag.TipoCurso" class="form-select"></select>
                <span asp-validation-for="Curso[0].TipoCurso" class="text-danger"></span>
            </div>

            
            <button type="button" class="btn btn-danger h-100" onclick="removeItem(this, 'cursos')">Remover</button>
            
        </div>
    </div>
    <button type="button" class="btn btn-primary mb-3" onclick="addCurso()">Adicionar Curso</button>

    <!-- Endereços -->
    <h3>Endereços</h3>
    <div id="enderecos-container" class="mb-3">
        <div class="endereco-item d-flex flex-wrap gap-2 mb-2">
            <input name="Endereco[0].Cidade" placeholder="Cidade" class="form-control" />
            <span asp-validation-for="Endereco[0].Cidade" class="text-danger"></span>

            <input name="Endereco[0].Bairro" placeholder="Bairro" class="form-control" />
            <span asp-validation-for="Endereco[0].Bairro" class="text-danger"></span>

            <input name="Endereco[0].Logradouro" placeholder="Logradouro" class="form-control" />
            <span asp-validation-for="Endereco[0].Logradouro" class="text-danger"></span>

            <input name="Endereco[0].Numero" placeholder="Número" class="form-control" />

            <input name="Endereco[0].Complemento" placeholder="Complemento (opcional)" class="form-control" />

            <input name="Endereco[0].CEP" placeholder="CEP" class="form-control" oninput="this.value = aplicarMascaraCEP(this.value)" />
            <span asp-validation-for="Endereco[0].CEP" class="text-danger"></span>

            <button type="button" class="btn btn-danger" onclick="removeItem(this, 'enderecos')">Remover</button>
        </div>
    </div>
    <button type="button" class="btn btn-primary mb-3" onclick="addEndereco()">Adicionar Endereço</button>

    <br />
    <button type="submit" class="btn btn-success">Salvar</button>
    <a asp-action="Index" class="btn btn-secondary">Voltar</a>
</form>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
<script src="~/js/cadastro.js"></script>
